<?php

namespace VienasVienas\Bundle\BaseBundle\Entity;

use Doctrine\ORM\EntityRepository;
use VienasVienas\Bundle\BooksBundle\Entity\Book;

/**
 * Order Repository.
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class OrderRepository extends EntityRepository
{
    /**
     * Method checks is book reserved or not.
     *
     * @param Book $bookId
     *
     * @return bool
     */
    public function isBookReserved(Book $bookId)
    {
        $orders = $this->findByBook($bookId);

        foreach ($orders as $order) {
            if ($order->getStatus() == 'reserved') {
                return true;
            }
        }

        return false;
    }
}
